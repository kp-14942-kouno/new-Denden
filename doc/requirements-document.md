# コール業務管理システム 要件定義書

## 目次

1. [プロジェクト概要](#1-プロジェクト概要)
1. [システム目的](#2-システム目的)
1. [開発環境・技術スタック](#3-開発環境技術スタック)
1. [機能要件](#4-機能要件)
1. [非機能要件](#5-非機能要件)
1. [画面構成](#6-画面構成)
1. [データベース構成](#7-データベース構成)
1. [データベース環境切り替え仕様](#8-データベース環境切り替え仕様) ★NEW★
1. [運用要件](#9-運用要件)
1. [制約事項](#10-制約事項)
1. [用語定義](#11-用語定義)

-----

## 1. プロジェクト概要

### 1.1 プロジェクト名

コール業務管理システム（Call Center Management System）

### 1.2 対象業務

コールセンター業務における受電履歴の管理、顧客情報の参照、対応内容の記録

### 1.3 対象ユーザー

- コールセンターオペレーター（最大30名同時接続）
- 管理者（オペレーター兼任可能）

### 1.4 案件特性

- 案件ごとに異なるデータベース構造に対応
- 小規模案件から大規模案件まで柔軟に対応
- 顧客マスタの有無は案件による

-----

## 2. システム目的

### 2.1 主要目的

1. **業務効率の向上**
- 顧客情報と問合せ履歴の一元管理
- 過去の対応内容の即座な確認
- 対応漏れの防止
1. **柔軟な運用**
- 案件ごとに異なる設定に対応
- 既存データベースとの連携
- 規模に応じたデータベース選択
1. **データ活用**
- 問合せ履歴の蓄積と分析
- レポート機能による傾向把握
- CSV出力によるデータ活用
1. **セキュリティ**
- オペレーターごとのログイン管理
- 権限による機能制限
- 操作履歴の記録

### 2.2 期待効果

- 顧客情報確認時間: 30%短縮
- 履歴検索時間: 50%短縮
- 対応記録: 100%確実な保存

-----

## 3. 開発環境・技術スタック

### 3.1 開発環境

- **開発ツール**: Visual Studio 2022
- **フレームワーク**: WPF (Windows Presentation Foundation)
- **言語**: C#
- **ターゲットフレームワーク**: .NET 8.0
- **アーキテクチャパターン**: MVVM (Model-View-ViewModel)

### 3.2 データベース

#### 3.2.1 開発環境

- **メインDB**: SQLite
- **顧客マスタDB**: SQLite（既存DBを模擬）
- **画像DB**: SQLite（オプション）
- **特徴**:
  - ファイルベースで環境構築が容易
  - インストール不要
  - ローカル開発に最適
  - デバッグが容易

#### 3.2.2 本番環境

- **メインDB**: SQL Server または Access
- **顧客マスタDB**: SQL Server または Access（既存DBを参照）
- **画像DB**: SQL Server または Access（オプション）
- **選択基準**: 案件規模による（詳細は「7. データベース構成」参照）

### 3.3 配布方式

- **配布方法**: ClickOnce
- **更新方式**: 自動更新
- **配布単位**: 案件ごとに個別配布

### 3.4 動作環境

- **OS**: Windows 10 / Windows 11
- **解像度**: フルHD (1920x1080) 以上必須
- **画面設計**: 1870x1040 (タスクバー等を考慮)
- **.NET Runtime**: .NET 8.0 Runtime

-----

## 4. 機能要件

### 4.1 認証機能

#### 4.1.1 ログイン

- **機能**: オペレーターIDとパスワードによる認証
- **認証方式**: データベース認証
- **パスワード**: ハッシュ化して保存（BCrypt推奨）
- **案件選択**: ログイン時に案件を選択可能
- **セッション管理**: ログイン状態を保持

#### 4.1.2 ログアウト

- **機能**: ログアウトボタンによる明示的なログアウト
- **動作**: セッションクリア、ログイン画面へ遷移

#### 4.1.3 権限管理

- **一般オペレーター**: 問合せ登録・検索・更新
- **管理者**: 上記に加え、顧客メモの編集、設定変更

-----

### 4.2 検索機能

#### 4.2.1 顧客マスタ検索

- **検索項目**: 案件ごとに動的に設定可能
  - 例: 顧客ID、顧客名、電話番号、メールアドレスなど
- **検索方式**:
  - 完全一致（Exact）
  - 部分一致（Partial / LIKE検索）
- **検索結果**: 複数件の場合はリスト表示、選択して詳細表示
- **前提条件**: 案件に顧客マスタが存在する場合のみ表示

#### 4.2.2 カスタム項目検索

- **検索項目**: 問合せ履歴のカスタム項目から検索
  - 例: 発信者名、電話番号、契約番号など
- **検索対象**: 過去の問合せ履歴
- **検索結果**: 問合せ履歴を表示
- **用途**: 顧客マスタに登録されていない発信者の検索

#### 4.2.3 問合せ履歴検索

- **検索項目**:
  - 受電日（期間指定）
  - カテゴリー
  - 対応状況
  - オペレーター
  - 顧客ID
  - キーワード（問合せ内容、対応内容から検索）
- **検索結果**: 問合せ履歴一覧を表示
- **ソート**: 受電日時の降順（最新順）

-----

### 4.3 顧客情報表示機能

#### 4.3.1 顧客情報の縦リスト表示

- **表示形式**: 項目名と値を縦に並べたリスト形式
- **グループ分け**: タブによるグループ切り替え（最大5グループ）
  - 例: 基本情報、契約情報、住所、その他、画像・メモ
- **項目マッピング**: DBのカラム名と表示名を設定ファイルでマッピング
- **表示順**: 設定ファイルで指定した順序で表示

#### 4.3.2 関連画像表示

- **表示位置**: 顧客情報エリア内（画像・メモタブ）
- **画像取得**: 画像DBからファイルパス情報を取得、パスから画像読み込み
- **複数画像**: 複数画像がある場合は横並びで表示
- **拡大表示**: 画像クリックで拡大表示（別ウィンドウまたはポップアップ）
- **サムネイル**: 100x100px

#### 4.3.3 顧客メモ

- **表示**: 顧客情報エリア内に表示
- **編集権限**: 管理者のみ編集可能
- **保存**: 1顧客1メモ（上書き方式）
- **用途**: VIP情報、注意事項、過去トラブル情報など

#### 4.3.4 過去問合せ履歴

- **表示**: 選択中の顧客の過去問合せ履歴を表示
- **表示件数**: 制限なし（全件表示）
- **表示順**: 受電日時の降順
- **アクション**: 各履歴から「この履歴を編集」ボタンで問合せ内容を右パネルに読み込み

-----

### 4.4 問合せ登録・更新機能

#### 4.4.1 新規問合せ登録

- **入力項目**:
  - 受電日時（自動入力、現在日時）
  - オペレーター（自動入力、ログイン中のオペレーター）
  - カテゴリー（必須、選択式）
  - 対応状況（必須、選択式）
  - 問合せ内容（必須、テキストエリア）
  - 対応内容（任意、テキストエリア）
  - カスタム項目（最大10項目、案件ごとに設定）
- **顧客紐付け**: 顧客マスタで選択中の顧客と自動紐付け
- **バリデーション**: 必須項目のチェック
- **保存処理**: INSERT処理

#### 4.4.2 既存履歴更新

- **前提**: 過去問合せ履歴または検索結果から履歴を選択
- **動作**: 選択した履歴の内容を右パネルに読み込み
- **編集**: 各項目を編集可能
- **更新履歴保存**: 設定で有効化されている場合、更新前データを履歴テーブルに退避
- **保存処理**: UPDATE処理

#### 4.4.3 顧客紐付け機能

- **用途**: 登録時に顧客情報が不明だった問合せに、後から顧客を紐付ける
- **操作方法**:
1. カスタム項目検索または問合せ履歴検索で対象の問合せを選択
1. 顧客マスタ検索で顧客を検索・選択
1. 「この顧客と紐付ける」ボタンをクリック
1. 問合せ履歴のCustomerKeyを更新
- **表示**: 顧客情報エリアに「顧客紐付け」セクションを表示

#### 4.4.4 クリア機能

- **動作**: 右パネルの入力内容をクリア
- **保持**: 左パネルの顧客情報はクリアされない
- **確認**: 入力途中の場合は確認ダイアログを表示

-----

### 4.5 カスタム項目機能

#### 4.5.1 カスタム項目定義

- **項目数**: 最大10項目（CustomCol01 ~ CustomCol10）
- **設定内容**:
  - カラム番号（1~10）
  - 項目名（DB内部用）
  - 表示名（画面表示用）
  - 項目タイプ（Text / Number / Date / Select）
  - 必須/任意
  - 表示順
  - 選択肢（Select型の場合、JSON形式）
  - 検索可否
- **保存場所**: CustomFieldDefinitionテーブル

#### 4.5.2 カスタム項目の表示

- **表示位置**: 問合せ登録画面内の専用セクション
- **表示形式**: 有効な項目のみ表示順に表示
- **入力制御**: 項目タイプに応じた入力コントロール

-----

### 4.6 データエクスポート機能

#### 4.6.1 CSV出力

- **対象**: 問合せ履歴検索結果
- **出力項目**: 検索結果の全項目
- **ファイル名**: `問合せ履歴_YYYYMMDD_HHMMSS.csv`
- **文字コード**: UTF-8 with BOM（Excel互換）

-----

### 4.7 レポート機能

#### 4.7.1 問合せ履歴レポート

- **表示内容**: 問合せ履歴の一覧
- **印刷**: ブラウザの印刷機能を使用
- **フォーマット**: 表形式

-----

## 5. 非機能要件

### 5.1 性能要件

- **検索応答時間**: 3秒以内（通常の検索条件）
- **画面遷移時間**: 1秒以内
- **同時接続数**: 最大30ユーザー（SQL Server使用時）
- **同時接続数**: 推奨5~10ユーザー（Access使用時）

### 5.2 可用性要件

- **稼働時間**: 業務時間中（平日9:00~18:00）
- **ダウンタイム**: 計画メンテナンス時のみ
- **バックアップ**: 1日1回（SQL Server）/ 週1回（Access）

### 5.3 セキュリティ要件

- **認証**: データベース認証
- **パスワード**: ハッシュ化（BCrypt）
- **権限管理**: 一般/管理者の2段階
- **通信**: 社内ネットワーク内のみ
- **ログ**: ログイン履歴、操作履歴の記録

### 5.4 保守性要件

- **コード品質**: MVVMパターンに準拠
- **命名規則**: C#標準に準拠
- **コメント**: 複雑なロジックにはコメント必須
- **バージョン管理**: Git使用

### 5.5 拡張性要件

- **案件追加**: 設定ファイルとDBの追加のみで対応
- **項目追加**: カスタム項目で対応（最大10項目）
- **機能追加**: MVVMパターンにより容易

-----

## 6. 画面構成

### 6.1 画面一覧

1. ログイン画面
1. メイン画面（左右分割レイアウト）

### 6.2 メイン画面レイアウト

#### 6.2.1 全体構成（1870x1040px）

```
┌─────────────────────────────────────────────┐
│ ヘッダー (60px)                             │
├──────────────────┬──────────────────────────┤
│ 左パネル (600px) │ 右パネル (1270px)        │
│                  │                          │
│ - 検索エリア     │ - 問合せ登録・更新       │
│   (280px)        │                          │
│                  │                          │
│ - 検索結果       │                          │
│   (150px)        │                          │
│                  │                          │
│ - 顧客情報       │                          │
│   (550px)        │                          │
│                  │                          │
└──────────────────┴──────────────────────────┘
```

#### 6.2.2 検索エリア（280px）

- **タブ構成**:
1. 顧客マスタ検索（顧客マスタありの場合）
1. カスタム項目検索
1. 問合せ履歴検索
- **タブ表示制御**:
  - 顧客マスタなし: 顧客マスタタブを非表示
  - カスタム項目検索不要: カスタム項目タブを非表示

#### 6.2.3 検索結果エリア（150px）

- **表示内容**: 検索結果のリスト（スクロール可能）
- **選択**: クリックで選択、選択中は背景色変更
- **詳細表示**: 選択で顧客情報エリアまたは右パネルに詳細表示

#### 6.2.4 顧客情報エリア（550px）

- **タブ構成**: 最大5グループ（案件ごとに設定）
- **縦リスト表示**: 項目名 | 値
- **特別セクション**:
  - 顧客紐付けセクション（問合せ履歴編集中で顧客なしの場合）
  - 関連画像セクション
  - 顧客メモセクション
  - 過去問合せ履歴セクション

#### 6.2.5 右パネル（問合せ登録・更新）

- **基本情報**: 受電日時、オペレーター、カテゴリー、ステータス
- **問合せ内容**: テキストエリア
- **対応内容**: テキストエリア
- **カスタム項目**: 有効な項目のみ表示
- **アクションボタン**: 既存履歴更新 / 新規登録 / クリア

-----

## 7. データベース構成

### 7.1 データベース分離設計（3層）

#### 7.1.1 グループ①: 顧客マスタ・画像DB

- **用途**: 既存の顧客データベース（参照のみ）
- **テーブル**:
  - 顧客マスタテーブル（案件ごとに構造が異なる）
  - 画像情報テーブル（オプション）
- **アクセス**: 読み取り専用

#### 7.1.2 グループ②: 設定・マスタDB

- **用途**: アプリケーションの設定とマスタデータ
- **テーブル**:
  - 案件マスタ
  - オペレーターマスタ
  - カテゴリーマスタ
  - ステータスマスタ
  - カスタム項目定義
  - 顧客マスタ表示設定
  - 履歴保存設定
- **更新頻度**: 低

#### 7.1.3 グループ③: 問合せ履歴DB

- **用途**: トランザクションデータ
- **テーブル**:
  - 問合せ履歴
  - 問合せ履歴更新履歴（オプション）
  - 顧客メモ
- **更新頻度**: 高（日々増加）

### 7.2 DB選択基準

- **小規模案件**（5名以下・受電少）: Access
- **中規模案件**（10-20名・受電中）: SQL Server
- **大規模案件**（30名・受電多）: SQL Server

### 7.3 Access使用時の注意

- **ファイル分離**: 設定DBと履歴DBを別ファイルに分離（2GB制限対策）
- **同時接続数**: 推奨5~10名まで
- **バックアップ**: 定期的なファイルコピー

-----

## 8. データベース環境切り替え仕様 ★NEW★

### 8.1 環境切り替えの目的

開発環境ではSQLiteを使用して開発効率を高め、本番環境では案件規模に応じてSQL ServerまたはAccessに切り替えることで、柔軟な運用を実現する。

### 8.2 環境種別と使用DB

| 環境種別 | 使用DB | 用途 | 接続方式 |
|---------|--------|------|----------|
| 開発環境 | SQLite | ローカル開発、単体テスト | ファイルベース |
| 検証環境 | SQLite / SQL Server | 結合テスト、受入テスト | ファイル or ネットワーク |
| 本番環境（小規模） | Access | 5名以下の案件 | ファイルベース（ネットワーク共有） |
| 本番環境（中・大規模） | SQL Server | 10名以上の案件 | TCP/IP接続 |

### 8.3 データベース抽象化層の設計

#### 8.3.1 アーキテクチャ

```
┌──────────────────────────────────┐
│ ViewModel層                      │
└────────────┬─────────────────────┘
             │
┌────────────▼─────────────────────┐
│ Repository層（DBアクセス抽象化）  │
└────────────┬─────────────────────┘
             │
┌────────────▼─────────────────────┐
│ IDbConnection インターフェース    │
├──────────────────────────────────┤
│ - SQLite実装                     │
│ - SQL Server実装                 │
│ - Access実装 (OleDb)             │
└──────────────────────────────────┘
```

#### 8.3.2 推奨ライブラリ

- **ORM**: Dapper（軽量、高速、柔軟性が高い）
- **代替案**: Entity Framework Core（マイグレーション機能が必要な場合）
- **SQLite**: Microsoft.Data.Sqlite
- **SQL Server**: Microsoft.Data.SqlClient
- **Access**: System.Data.OleDb

### 8.4 接続文字列の管理

#### 8.4.1 設定ファイル（appsettings.json）

```json
{
  "DatabaseSettings": {
    "Environment": "Development",  // Development / Staging / Production
    "DatabaseType": "SQLite",      // SQLite / SqlServer / Access
    
    "SQLite": {
      "MasterDbPath": "./Data/Master.db",
      "HistoryDbPath": "./Data/History.db",
      "CustomerDbPath": "./Data/Customer.db"
    },
    
    "SqlServer": {
      "MasterConnectionString": "Server=localhost;Database=CallCenter_Master;Integrated Security=true;",
      "HistoryConnectionString": "Server=localhost;Database=CallCenter_History;Integrated Security=true;",
      "CustomerConnectionString": "Server=localhost;Database=CallCenter_Customer;Integrated Security=true;"
    },
    
    "Access": {
      "MasterDbPath": "\\\\FileServer\\CallCenter\\Master.accdb",
      "HistoryDbPath": "\\\\FileServer\\CallCenter\\History.accdb",
      "CustomerDbPath": "\\\\FileServer\\CallCenter\\Customer.accdb"
    }
  }
}
```

#### 8.4.2 環境別設定ファイル

- `appsettings.Development.json` - 開発環境用（SQLite）
- `appsettings.Staging.json` - 検証環境用
- `appsettings.Production.json` - 本番環境用（SQL Server / Access）

#### 8.4.3 ビルド構成による切り替え

Visual Studioのビルド構成（Debug / Release）により、自動的に適切な設定ファイルを読み込む。

### 8.5 データベーススキーマの統一

#### 8.5.1 スキーマ管理方針

- **マスターSQLスクリプト**: SQLite形式でスキーマを定義
- **変換スクリプト**: SQLite → SQL Server / Access への変換スクリプトを用意
- **マイグレーション**: DbUpまたはFluentMigratorを使用

#### 8.5.2 データ型のマッピング

| SQLite型 | SQL Server型 | Access型 | 備考 |
|----------|--------------|----------|------|
| INTEGER | INT | Long Integer | 主キー、外部キー |
| TEXT | NVARCHAR(MAX) | Long Text | 文字列 |
| TEXT(n) | NVARCHAR(n) | Text(n) | 固定長文字列 |
| REAL | DECIMAL(18,2) | Number(Double) | 金額、数値 |
| BLOB | VARBINARY(MAX) | OLE Object | バイナリ（使用想定なし） |
| DATETIME | DATETIME2 | Date/Time | 日時 |
| BOOLEAN | BIT | Yes/No | フラグ |

#### 8.5.3 主キー生成方式

- **SQLite**: `INTEGER PRIMARY KEY AUTOINCREMENT`
- **SQL Server**: `INT IDENTITY(1,1) PRIMARY KEY`
- **Access**: `AutoNumber` 型

コード側では挿入後にID取得（SCOPE_IDENTITY() / last_insert_rowid()）

### 8.6 Repository層の実装例

#### 8.6.1 IDbConnectionFactory インターフェース

```csharp
public interface IDbConnectionFactory
{
    IDbConnection CreateMasterConnection();
    IDbConnection CreateHistoryConnection();
    IDbConnection CreateCustomerConnection();
}
```

#### 8.6.2 環境別実装

```csharp
// SQLite実装
public class SqliteConnectionFactory : IDbConnectionFactory
{
    private readonly DatabaseSettings _settings;
    
    public IDbConnection CreateMasterConnection()
    {
        return new SqliteConnection($"Data Source={_settings.SQLite.MasterDbPath}");
    }
    // 他のメソッドも同様
}

// SQL Server実装
public class SqlServerConnectionFactory : IDbConnectionFactory
{
    private readonly DatabaseSettings _settings;
    
    public IDbConnection CreateMasterConnection()
    {
        return new SqlConnection(_settings.SqlServer.MasterConnectionString);
    }
    // 他のメソッドも同様
}
```

#### 8.6.3 DI（依存性注入）による切り替え

```csharp
// Program.cs または App.xaml.cs
var dbType = configuration["DatabaseSettings:DatabaseType"];

switch (dbType)
{
    case "SQLite":
        services.AddSingleton<IDbConnectionFactory, SqliteConnectionFactory>();
        break;
    case "SqlServer":
        services.AddSingleton<IDbConnectionFactory, SqlServerConnectionFactory>();
        break;
    case "Access":
        services.AddSingleton<IDbConnectionFactory, AccessConnectionFactory>();
        break;
}
```

### 8.7 SQL文の差異吸収

#### 8.7.1 日時関数

| 機能 | SQLite | SQL Server | Access |
|------|--------|------------|--------|
| 現在日時 | `datetime('now')` | `GETDATE()` | `Now()` |
| 日付加算 | `datetime('now', '+7 days')` | `DATEADD(day, 7, GETDATE())` | `DateAdd("d", 7, Now())` |

**対応方法**: Repository層で環境に応じたSQL文を生成、またはDapperのパラメータで対応

#### 8.7.2 ページング

| DB | SQL例 |
|----|-------|
| SQLite | `LIMIT 10 OFFSET 20` |
| SQL Server | `OFFSET 20 ROWS FETCH NEXT 10 ROWS ONLY` |
| Access | サブクエリまたはTOP句の組み合わせ |

**対応方法**: Repository内でDB種別に応じたクエリを生成

#### 8.7.3 部分一致検索

全DB共通で `LIKE '%keyword%'` が使用可能（差異なし）

### 8.8 マイグレーション戦略

#### 8.8.1 初期セットアップ

1. **開発環境**: SQLiteファイルを自動生成（初回起動時）
2. **本番環境**: セットアップスクリプト（.sql）を実行してDB作成

#### 8.8.2 スキーマ変更

- **DbUp** または **FluentMigrator** を使用
- マイグレーションスクリプトはSQL Server形式で作成
- SQLite用に変換ツールで自動変換

#### 8.8.3 バージョン管理

- `SchemaVersion` テーブルでDBバージョンを管理
- アプリ起動時に自動マイグレーション実行

### 8.9 開発フロー

#### 8.9.1 ローカル開発

1. Visual Studio起動
1. `appsettings.Development.json` が自動選択
1. SQLiteファイルがローカルに生成
1. コーディング・デバッグ

#### 8.9.2 本番デプロイ

1. ClickOnceパッケージ作成（Release構成）
1. `appsettings.Production.json` が組み込まれる
1. 案件ごとの接続文字列を事前設定
1. 配布URLから自動インストール

### 8.10 テスト戦略

#### 8.10.1 単体テスト

- **対象**: Repository層
- **使用DB**: SQLite（インメモリDB）
- **ツール**: xUnit + Moq

#### 8.10.2 結合テスト

- **対象**: 全体フロー
- **使用DB**: SQLite（ファイルベース）
- **データ**: テストデータを自動投入

#### 8.10.3 受入テスト

- **対象**: 本番同等環境
- **使用DB**: SQL Server（検証環境）

### 8.11 パフォーマンス考慮事項

#### 8.11.1 接続プーリング

- **SQL Server**: 自動的に接続プール使用
- **SQLite**: `Pooling=True` をConnectionStringに追加
- **Access**: 接続プールなし（ファイルロック方式）

#### 8.11.2 インデックス設計

主要検索項目に対してインデックスを作成（全DB共通）:
- 顧客マスタ: 顧客ID, 電話番号, メールアドレス
- 問合せ履歴: 受電日時, 顧客ID, カテゴリー

#### 8.11.3 大量データ対応

- **ページング**: 常に適用（1回の取得は最大100件）
- **遅延ロード**: 詳細情報は選択時に取得

### 8.12 トラブルシューティング

#### 8.12.1 SQLiteファイルが見つからない

- **原因**: 相対パスの基準ディレクトリが異なる
- **対応**: 絶対パスまたは `AppDomain.CurrentDomain.BaseDirectory` 基準

#### 8.12.2 Accessファイルがロックされる

- **原因**: 複数ユーザーの同時接続
- **対応**: 接続を即座にClose、using文を徹底

#### 8.12.3 SQL Serverへの接続失敗

- **原因**: ファイアウォール、認証方式の違い
- **対応**: 接続文字列の確認、SQL Server構成の確認

-----

## 9. 運用要件

### 9.1 案件追加フロー

1. 新規案件用のデータベースを作成（SQL実行）
1. 設定ファイル（config.json / appsettings.Production.json）を作成
1. DB種別と接続情報を設定
1. ClickOnce配布URL設定
1. オペレーターへ配布URL通知

### 9.2 マスタデータ管理

- **カテゴリー・ステータス**: アプリ内または直接DB更新
- **オペレーター**: アプリ内または直接DB更新
- **カスタム項目定義**: 設定ファイルまたはDB更新

### 9.3 バックアップ

- **SQLite**: ファイルコピー（日次）
- **SQL Server**: 自動バックアップ（1日1回）
- **Access**: 手動バックアップ（週1回推奨）

-----

## 10. 制約事項

### 10.1 技術的制約

- **対応OS**: Windows 10 / 11のみ
- **解像度**: フルHD以上必須
- **ネットワーク**: 社内ネットワーク必須（オフライン不可、ただし開発環境のSQLiteは例外）

### 10.2 機能的制約

- **カスタム項目**: 最大10項目
- **顧客情報グループ**: 最大5グループ
- **同時編集**: 同一レコードへの同時更新は想定しない

### 10.3 運用上の制約

- **Access**: 2GB制限、同時接続数制限
- **画像ファイル**: ローカルまたはネットワーク上のファイルパス必須
- **SQLite**: 開発環境専用（本番での大規模運用は非推奨）

-----

## 11. 用語定義

|用語    |定義                           |
|------|-----------------------------|
|案件    |コールセンター業務の単位。案件ごとにDB・設定が異なる  |
|顧客マスタ |既存の顧客データベース。案件により有無が異なる      |
|カスタム項目|案件固有の入力項目。最大10項目まで定義可能       |
|問合せ履歴 |受電記録。顧客からの問い合わせ内容と対応内容を記録    |
|顧客紐付け |顧客情報なしで登録した問合せに、後から顧客を関連付けること|
|オペレーター|コールセンターで電話対応を行う担当者           |
|管理者   |オペレーター権限に加え、設定変更やメモ編集が可能な担当者 |
|DB抽象化層|データベースの種類に依存しないアクセス層。Repository層として実装|
|マイグレーション|データベーススキーマのバージョン管理と更新処理|

-----

## 改訂履歴

|版数 |日付        |改訂内容|作成者|
|---|----------|----|---|
|1.0|2025/01/12|初版作成|-  |
|1.1|2025/01/14|「8. データベース環境切り替え仕様」セクションを追加|-  |

-----

**以上**
